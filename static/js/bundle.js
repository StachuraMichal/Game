!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(t,i){t.exports=jQuery},function(t,i,e){"use strict";e.r(i);var s=class{constructor(t=25,i=25){this.width=t,this.height=i,this.array=new Array(t).fill(new Array(i).fill(0))}setDimensions(t,i){this.array=new Array(t).fill(new Array(i).fill(0)),this.width=t,this.height=i}fillRandom(t){for(var i,e=0;e<this.array.length;e++){i=new Array(this.height);for(var s=0;s<this.array[0].length;s++)i[s]=Math.random()<t?1:0;this.array[e]=i}}doStep(){for(var t,i=new Array(this.width).fill(new Array(this.height)),e=0;e<this.array.length;e++){t=new Array(this.height);for(var s=0;s<this.array[0].length;s++)t[s]=(e-1<0?0:this.array[e-1][s])+this.array[e][s]+(e+1==this.width?0:this.array[e+1][s]);i[e]=t}for(e=0;e<this.array.length;e++){t=new Array(this.height);for(s=0;s<this.array[0].length;s++)t[s]=(s-1<0?0:i[e][s-1])+i[e][s]+(s+1==this.height?0:i[e][s+1])-this.array[e][s],3==t[s]?t[s]=1:2==t[s]?t[s]=this.array[e][s]:t[s]=0;this.array[e]=t}}},n=e(0),a=e.n(n);var h=class{constructor(){this.canvas=document.querySelector("#canvas"),this.ctx=this.canvas.getContext("2d"),this.resize(),this.makeGrid(),this.allowDraw=a()("#allow-draw"),this.drawButton=a()("#draw-button"),this.eraseButton=a()("#erase"),this.draw=!0,this.events()}events(){this.drawButton.on("click",()=>{this.draw=!0,this.drawButton.removeClass("btn-outline-success"),this.drawButton.addClass("btn-success"),this.eraseButton.addClass("btn-outline-danger"),this.eraseButton.removeClass("btn-danger")}),this.eraseButton.on("click",()=>{this.draw=!1,this.drawButton.addClass("btn-outline-success"),this.drawButton.removeClass("btn-success"),this.eraseButton.removeClass("btn-outline-danger"),this.eraseButton.addClass("btn-danger")}),this.allowDraw.on("click",()=>{this.allowDraw.is(":checked")?(this.drawButton.removeClass("d-none"),this.eraseButton.removeClass("d-none"),this.drawButton.collapse("show"),this.eraseButton.collapse("show")):(this.drawButton.collapse("hide"),this.eraseButton.collapse("hide"))})}render(t,i){this.clear(),this.ctx.fillStyle="green";for(var e=0;e<t.length;e++)for(var s=0;s<t[0].length;s++)1==t[e][s]&&this.ctx.fillRect(i*e,i*s,i,i);this.makeGrid(i)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(t=500,i=500){this.canvas.width=t,this.canvas.height=i}makeGrid(t=20){if(!(t<10)){var i=Math.floor(this.canvas.width/t),e=Math.floor(this.canvas.height/t);this.ctx.strokeStyle="grey",this.ctx.lineWidth=1;for(var s=0;s<=i;s++)this.ctx.beginPath(),this.ctx.moveTo(t*s,0),this.ctx.lineTo(t*s,this.canvas.height),this.ctx.stroke();for(var n=0;n<=e;n++)this.ctx.beginPath(),this.ctx.moveTo(0,t*n),this.ctx.lineTo(this.canvas.width,t*n),this.ctx.stroke()}}fillCell(t,i,e,s){var n=this.canvas.getBoundingClientRect();let a=Math.floor((t-n.left)/e),h=Math.floor((i-n.top)/e),r=[...s[a]];r[h]=this.draw?1:0,s[a]=r,this.render(s,e)}warning(t){this.clear(),this.ctx.font="30px Comic Sans MS",this.ctx.fillStyle="red",this.ctx.textAlign="center",this.ctx.fillText(t,this.canvas.width/2,this.canvas.height/2)}};new class{constructor(){this.runButton=a()("#run"),this.initializeButton=a()("#initialize"),this.cellSizeInput=a()("#cell-size"),this.cellDensityInput=a()("#cell-density"),this.simTimeInput=a()("#sim-time"),this.timeDisplay=a()("#current-time"),this.resizeButton=a()("#resize"),this.heightInput=a()("#height"),this.widthInput=a()("#width"),this.canvas=a()("#canvas"),this.allowDrawCheck=a()("#allow-draw"),this.drawingTool=new h,this.cellZone=new s,this.stopButton=a()("#stop"),this.enableEndCheck=a()("#enable-end"),this.drawButton=a()("#draw-button"),this.eraseButton=a()("#erase"),this.stepButton=a()("#step"),this.events(),this.initialized=!1,this.painting=!1,this.allowDraw=this.allowDrawCheck.is(":checked"),this.stop=!0}events(){this.runButton.on("click",this.run.bind(this)),this.initializeButton.on("click",this.initialize.bind(this)),this.resizeButton.on("click",this.resize.bind(this)),this.canvas.on("mousedown",this.startPosition.bind(this)),this.canvas.on("mouseup",this.endPosition.bind(this)),this.canvas.on("mousemove",this.draw.bind(this)),this.allowDrawCheck.on("click",this.allowDrawFun.bind(this)),this.stopButton.on("click",()=>{this.stop=!0}),this.enableEndCheck.on("click",this.enableEnd.bind(this)),this.cellSizeInput.on("input",()=>{this.stop=!0,this.resize()}),this.stepButton.on("click",this.step.bind(this))}enableEnd(){this.enableEndCheck.is(":checked")?this.simTimeInput.removeAttr("disabled"):this.simTimeInput.attr("disabled","disabled")}allowDrawFun(){this.allowDraw=this.allowDrawCheck.is(":checked"),this.initialized||(this.drawingTool.clear(),this.drawingTool.makeGrid(this.cellSizeInput.val())),this.initialized=!0}step(){this.checkConditions()&&this.initialized?(this.stop=!0,this.cellZone.doStep(),this.drawingTool.render(this.cellZone.array,this.cellSizeInput.val()),this.timeDisplay.text("time: "+(1*this.timeDisplay.text().replace("time: ","")+.03).toFixed(2))):this.initialized?this.drawingTool.warning("wrong input!"):this.drawingTool.warning("You have to initialize first")}run(){if(!this.checkConditions()||!this.initialized)return void(this.initialized?this.drawingTool.warning("wrong input!"):this.drawingTool.warning("You have to initialize first"));this.stop=!1;let t=Date.now()-Math.floor(1e3*this.timeDisplay.text().replace("time: ",""));var i=setInterval(function(){let e=Date.now()-t;if(e>1e3*this.simTimeInput.val()&&this.enableEndCheck.is(":checked")||this.stop)return void clearInterval(i);this.cellZone.doStep(),this.drawingTool.render(this.cellZone.array,this.cellSizeInput.val()),this.timeDisplay.text("time: "+(e/1e3).toFixed(2))}.bind(this),30)}initialize(){if(!this.checkConditions())return void this.drawingTool.warning("wrong input!");this.stop=!0,this.timeDisplay.text("time: 0");let t=Math.floor(this.drawingTool.canvas.width/this.cellSizeInput.val()),i=Math.floor(this.drawingTool.canvas.height/this.cellSizeInput.val());this.cellZone.setDimensions(t,i),this.cellZone.fillRandom(this.cellDensityInput.val());var e=[...this.cellZone.array];this.drawingTool.render(e,this.cellSizeInput.val()),this.initialized=!0}checkConditions(){return!!a.a.isNumeric(this.cellDensityInput.val())&&(!(this.cellDensityInput.val()>1||this.cellDensityInput.val()<0)&&!!a.a.isNumeric(this.cellSizeInput.val()))}resize(){if(this.stop=!0,this.timeDisplay.text("time: 0"),this.initialized=!1,!a.a.isNumeric(this.heightInput.val()))return void this.drawingTool.warning("wrong input!");if(!a.a.isNumeric(this.widthInput.val()))return void this.drawingTool.warning("wrong input!");this.drawingTool.resize(this.widthInput.val(),this.heightInput.val()),this.drawingTool.makeGrid(this.cellSizeInput.val());let t=Math.floor(this.drawingTool.canvas.width/this.cellSizeInput.val()),i=Math.floor(this.drawingTool.canvas.height/this.cellSizeInput.val());this.cellZone.setDimensions(t,i)}startPosition(t){this.painting=!0,this.draw(t)}endPosition(){this.painting=!1}draw(t){this.painting&&this.allowDraw&&(this.initialized=!0,this.drawingTool.fillCell(t.clientX,t.clientY,this.cellSizeInput.val(),this.cellZone.array))}}}]);